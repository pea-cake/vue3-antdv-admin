import{u as _}from"./dynamic-table-ChH7o3Dt.js";import{e as l,K as m,d as k,r as T,c as F,O as h,q as O,v as R,F as r,H as s}from"./index-CLE865zi.js";import{S as u}from"./ApiSelect.vue_vue_type_script_setup_true_lang-DjZv7itZ.js";import"./dayjs.min-oWglilSk.js";import{w as g}from"./common-Cw4MEucO.js";import{g as d,f as P,t as q}from"./columns-f8d0eaR2.js";import{d as E}from"./debounce-DRRJQWG2.js";import{I as V}from"./index-4gd6P7H_.js";import{P as j}from"./PlusOutlined-C7y5fiS6.js";import{T as U}from"./index-DeGIXeli.js";import{C as D}from"./index-BJy8r1mk.js";import{_ as I}from"./index-DlsLLpFe.js";import"./index-5pR0fW6L.js";import"./index-8DhAXed3.js";import"./_baseUniq-C2y4DHHK.js";import"./_arrayIncludesWith-DbV0gfeD.js";import"./collapseMotion-BxJChX1C.js";import"./move-BBD2taG7.js";import"./RightOutlined-BRtNirYa.js";import"./VerticalRightOutlined-DKPQkUVF.js";import"./cloneDeep-BKIs_T9V.js";import"./schema-form.vue_vue_type_script_setup_true_lang-CAHU-WJf.js";import"./isNumber-DuiY7kzJ.js";import"./is-CRxDFdx9.js";import"./index-DLjJ34Ye.js";import"./useFlexGapSupport-C8hMoorc.js";import"./hasIn-Cvf6lBiT.js";import"./QuestionCircleOutlined-ih8wMwxH.js";import"./_castArrayLikeObject-C-mbEK6n.js";import"./index-DRjcgh4c.js";import"./DownOutlined-cuySjEGe.js";import"./index-DRPd0vz7.js";import"./dateUtil-6XP-vD3c.js";import"./pick-Dd397G7n.js";import"./FullscreenOutlined-BxYJTR9E.js";import"./index-Mb92E5YV.js";import"./LeftOutlined-DUHsjmfY.js";import"./zh_CN-CAyhejr6.js";import"./index-DlJSEVq9.js";import"./useMergedState-C-8PK_0t.js";import"./index-Brv4cA8J.js";import"./EnterOutlined-BFTwbjdv.js";import"./CheckOutlined-HuwgDXGA.js";import"./CopyOutlined-BbRV1N0s.js";import"./index-CJVoQ--5.js";import"./index-EZsyY4w_.js";import"./useRefs-Cqt9dI57.js";import"./index-YmsSFXvY.js";import"./isMobile-BbN7I0i_.js";import"./index-CXfQ_vys.js";import"./index-DwHg8mwr.js";const N=[{title:"姓名",dataIndex:"name",sorter:!0,defaultEditable:!0,editable:({index:e})=>e>0,formItemProps:{defaultValue:"李白",rules:[{required:!0,message:"请输入姓名"}]},editFormItemProps:{extendSearchFormProps:!1,rules:[{required:!0,message:"请输入姓名"}]}},{title:"性别",dataIndex:"gender",formItemProps:{component:"Select",componentProps:({formInstance:e,formModel:t})=>({options:[{label:"男",value:1},{label:"女",value:0}],onChange(){e==null||e.updateSchema({field:"clothes",componentProps:{options:d(t.gender)}}),t.clothes=""}})},editFormItemProps:{extendSearchFormProps:!0,rules:[{required:!0,type:"number",message:"请选择性别"}],componentProps:({formInstance:e,formModel:t,tableRowKey:a})=>({onChange(){e==null||e.updateSchema({field:`${a}.clothes`,componentProps:{options:d(t.gender)}}),t.clothes=""}})},customRender:({record:e})=>["女","男"][e.gender]},{title:"衣服",dataIndex:"clothes",formItemProps:{component:"Select",componentProps:({formModel:e})=>({options:d(e.gender)})},customRender:({record:e})=>{var t;return(t=d(e.gender).find(a=>a.value===e.clothes))==null?void 0:t.label}},{title:"图片",dataIndex:"img",hideInSearch:!0,formItemProps:{component:"Upload",defaultValue:[{uid:"-1",name:"image.png",status:"done",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"}],componentProps:{maxCount:1,listType:"picture-card",action:"https://www.mocky.io/v2/5cc8019d300000980a055e76"},componentSlots:({formModel:e})=>({default:()=>{var t;return(t=e.img)!=null&&t.length?"":l("div",null,[l(j,null,null),l("div",{class:"mt-8px"},[m("Upload")])])}})},customRender:({record:e})=>l(V,{width:100,src:e.img},null)},{title:"价格",dataIndex:"price",editFormItemProps:{component:"InputNumber",rules:[{required:!0,message:"请输入价格！"}]},customRender:({record:e})=>`${e.price}元`},{title:"状态",dataIndex:"status",formItemProps:{component:"Select",componentProps:({formInstance:e,schema:t})=>({showSearch:!0,filterOption:!1,request:()=>P(),onSearch:E(async a=>{t.value.loading=!0;const p={field:t.value.field,componentProps:{options:[]}};e==null||e.updateSchema([p]);const c=await P(a).finally(()=>t.value.loading=!1);p.componentProps.options=c,e==null||e.updateSchema([p])},500),onChange(a){e.setFieldsValue({status:a})}})},editFormItemProps:{rules:[{required:!0,type:"number",message:"请选择状态"}]},customRender:({record:e})=>l(U,{color:e.status==1?"red":"default"},{default:()=>[["已售罄","热卖中"][e.status]]})}],De=k({name:"EditRowTable",__name:"index",setup(e){const[t]=_(),a=T("cell"),p=async o=>(await g(500),{...o,items:q}),c=F(()=>[...N,{title:"操作",hideInTable:a.value==="cell",width:200,dataIndex:"ACTION",actions:({record:o},i)=>{const{startEditable:n,cancelEditable:b,isEditable:S,getEditFormModel:x,validateRow:C}=i;return S(o.id)?[{label:"保存",onClick:async()=>{var v;const f=await C(o.id);h.loading({content:"保存中...",key:o.id}),x(o.id),await g(2e3),b(o.id),h.success({content:"保存成功!",key:o.id,duration:2}),Object.assign(o,{...f,img:((v=f.img[0])==null?void 0:v.thumbUrl)||o.img})}},{label:"取消",onClick:()=>{b(o.id)}}]:[{label:"编辑",onClick:()=>{n(o.id,o)}}]}}]),y=(o,i,n)=>{},w=async(o,i,n)=>{await g(2e3),Object.assign(n,i)};return(o,i)=>(R(),O("div",null,[l(s(I),{message:"可编辑行表格",type:"info","show-icon":""},{description:r(()=>i[1]||(i[1]=[m(" 可编辑行表格-可编辑行表格使用示例 ")])),_:1}),l(s(D),{title:"可编辑行表格基本使用示例",style:{"margin-top":"20px"}},{default:r(()=>[l(s(t),{size:"small",bordered:"","data-request":p,columns:c.value,"editable-type":a.value,"on-save":w,"on-cancel":y,"row-key":"id"},{toolbar:r(()=>[l(s(u),{value:a.value,"onUpdate:value":i[0]||(i[0]=n=>a.value=n)},{default:r(()=>[l(s(u).Option,{value:"single"},{default:r(()=>i[2]||(i[2]=[m(" 单行编辑 ")])),_:1,__:[2]}),l(s(u).Option,{value:"multiple"},{default:r(()=>i[3]||(i[3]=[m(" 多行编辑 ")])),_:1,__:[3]}),l(s(u).Option,{value:"cell"},{default:r(()=>i[4]||(i[4]=[m(" 可编辑单元格 ")])),_:1,__:[4]})]),_:1},8,["value"])]),_:1},8,["columns","editable-type"])]),_:1})]))}});export{De as default};
